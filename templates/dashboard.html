<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Stato Lavanderia</title>
    <style>
        body {
            font-family: Arial;
            background: #f2f2f2;
            padding: 20px;
        }
        h1 {
            margin-bottom: 20px;
        }
        .machine {
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
            background: #eee;
        }
        .running {
            background: #ffe08a;
        }
        .idle {
            background: #b6f2b6;
        }
    </style>
</head>
<body>

<h1>Stato macchine lavanderia</h1>

<div id="machines"></div>

<script>
async function loadStatus() {
    const res = await fetch("/status");
    const data = await res.json();

    let html = "";
    for (const location in data) {
        html += `<h2>${location}</h2>`;
        for (const machine in data[location]) {
            const m = data[location][machine];
            const cls = m.status === "running" ? "running" : "idle";
            html += `<div class="machine ${cls}">
                        <b>${machine}</b> â€” ${m.status}
                     </div>`;
        }
    }

    document.getElementById("machines").innerHTML = html;
}

setInterval(loadStatus, 2000);
loadStatus();
</script>

</body>
</html>
